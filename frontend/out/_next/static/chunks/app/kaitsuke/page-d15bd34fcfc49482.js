(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{5077:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>d});var s=n(5155),i=n(2115);function t(e){let r=e.replace(/[^0-9]/g,"");return""===r?"":r.replace(/\B(?=(\d{3})+(?!\d))/g,",")}var l=n(6519);let a=e=>{let{isOpen:r,onClose:n,onConfirm:i,formData:l}=e;return r&&l?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"入力内容の確認"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold",children:"購入者情報"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("div",{children:"氏名："}),(0,s.jsxs)("div",{children:[l.lastName," ",l.firstName]}),l.companyName&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"法人名："}),(0,s.jsx)("div",{children:l.companyName})]}),(0,s.jsx)("div",{children:"メールアドレス："}),(0,s.jsx)("div",{children:l.email}),(0,s.jsx)("div",{children:"電話番号："}),(0,s.jsx)("div",{children:l.phone}),(0,s.jsx)("div",{children:"住所："}),(0,s.jsx)("div",{children:l.address}),(0,s.jsx)("div",{children:"媒体："}),(0,s.jsx)("div",{children:l.media}),l.agentName&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"紹介元・媒体名："}),(0,s.jsx)("div",{children:l.agentName})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold",children:"購入希望条件"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("div",{children:"物件："}),(0,s.jsxs)("div",{children:[l.property.no," ",l.property.address]}),(0,s.jsx)("div",{children:"種別："}),(0,s.jsx)("div",{children:l.property.type}),(0,s.jsx)("div",{children:"買付金額："}),(0,s.jsxs)("div",{children:[t(l.offerPrice.toString()),"万円"]}),(0,s.jsx)("div",{children:"手付金："}),(0,s.jsxs)("div",{children:[t(l.deposit.toString()),"万円"]}),(0,s.jsx)("div",{children:"融資特約："}),(0,s.jsx)("div",{children:l.loan?"あり":"なし"})]})]}),l.conditions.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold",children:"購入の条件"}),(0,s.jsx)("ul",{className:"list-disc list-inside",children:l.conditions.map((e,r)=>(0,s.jsx)("li",{children:e},r))})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"修正する"}),(0,s.jsx)("button",{onClick:i,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"送信する"})]})]})}):null};function d(){var e;let[r,n]=(0,i.useState)(null),[d,o]=(0,i.useState)(!1),[c,p]=(0,i.useState)(""),[m,h]=(0,i.useState)([]),[u,x]=(0,i.useState)(""),[j,v]=(0,i.useState)([]),[g,N]=(0,i.useState)(!1),[y,f]=(0,i.useState)(null),b=(0,i.useRef)(null);(0,i.useEffect)(()=>{(async()=>{let e=await l.p.getInstance().fetchProperties();h(e),v(e)})()},[]),(0,i.useEffect)(()=>{v(m.filter(e=>e.no.includes(u)||e.address.includes(u)))},[u,m]);let S=e=>{let r=t(e.target.value);e.target.value=r},F=async()=>{if(y)try{let r=await l.p.getInstance().sendKaitsukeFormData(y);if(console.log("API Response:",r),"success"===r.status){var e;alert("送信に成功しました"),N(!1),null==(e=b.current)||e.reset(),n(null),o(!1),p(""),x(""),f(null)}else alert("送信に失敗しました。\nしばらく経ってから再度お試しください。\nこのメッセージが繰り返し出る場合は、お手数ですが弊社に直接お問い合わせください。\n\n"+(r.message||"詳細不明"))}catch(e){console.error("送信エラー:",e),alert("送信に失敗しました。\nしばらく経ってから再度お試しください。\nこのメッセージが繰り返し出る場合は、お手数ですが弊社に直接お問い合わせください。\n\n"+e)}};return(0,s.jsxs)("div",{className:"m-4 p-4 bg-white rounded-lg shadow-md",children:[(0,s.jsx)("h1",{children:"買付申込フォーム"}),(0,s.jsxs)("p",{className:"text-sm text-red-500",children:["物件購入ご希望の場合、フォームに沿ってお申し込みください。",(0,s.jsx)("br",{}),"申込後、担当より申込内容を反映した買付証明書を送付いたします。"]}),(0,s.jsxs)("form",{ref:b,onSubmit:e=>{var n,s,i,t,l,a,d,o,c,p,m,h,u,x,j,v,g,y,b,S,F,P;e.preventDefault();let w=new FormData(e.currentTarget);f({lastName:null!=(h=null==(n=w.get("lastName"))?void 0:n.toString())?h:"",firstName:null!=(u=null==(s=w.get("firstName"))?void 0:s.toString())?u:"",companyName:null!=(x=null==(i=w.get("companyName"))?void 0:i.toString())?x:"",email:null!=(j=null==(t=w.get("email"))?void 0:t.toString())?j:"",phone:null!=(v=null==(l=w.get("phone"))?void 0:l.toString())?v:"",address:null!=(g=null==(a=w.get("address"))?void 0:a.toString())?g:"",media:null!=(y=null==(d=w.get("media"))?void 0:d.toString())?y:"",agentName:null!=(b=null==(o=w.get("agentName"))?void 0:o.toString())?b:"",property:r,offerPrice:Number(null!=(S=null==(c=w.get("offerPrice"))?void 0:c.toString().replace(/,/g,""))?S:0),deposit:Number(null!=(F=null==(p=w.get("deposit"))?void 0:p.toString().replace(/,/g,""))?F:0),loan:null!=(P=null==(m=w.get("loanContingency"))?void 0:m.toString())?P:"",conditions:[w.get("condition1"),w.get("condition2"),w.get("condition3"),w.get("condition4"),w.get("condition5")].filter(Boolean).map(e=>{var r;return null!=(r=null==e?void 0:e.toString())?r:""})}),N(!0)},children:[(0,s.jsx)("h2",{children:"購入者情報"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"lastName",children:["姓 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"lastName",name:"lastName",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"firstName",children:["名 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"firstName",name:"firstName",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"companyName",children:"法人名"}),(0,s.jsx)("input",{type:"text",id:"companyName",name:"companyName"}),(0,s.jsx)("div",{className:"note",children:"※法人名義で購入される場合はご入力ください"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"email",children:["メールアドレス ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"phone",children:["電話番号 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"tel",id:"phone",name:"phone",pattern:"[\\d\\-]+",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"address",children:["住所 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"address",name:"address",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"media",children:["媒体 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsxs)("select",{id:"media",name:"media",onChange:e=>{let r=e.target.value;o("業者様からの紹介"===r||"その他"===r)},defaultValue:"",required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- この物件を知った媒体をご教示ください --"}),(0,s.jsx)("option",{value:"LINE公式アカウント「利回り20%倶楽部」",children:"LINE公式アカウント「利回り20%倶楽部」"}),(0,s.jsx)("option",{value:"弊社のメルマガ",children:"弊社のメルマガ"}),(0,s.jsx)("option",{value:"健美家",children:"健美家"}),(0,s.jsx)("option",{value:"LIFULL HOME'S",children:"LIFULL HOME'S"}),(0,s.jsx)("option",{value:"at home",children:"at home"}),(0,s.jsx)("option",{value:"不動産投資連合隊",children:"不動産投資連合隊"}),(0,s.jsx)("option",{value:"リガイド",children:"リガイド"}),(0,s.jsx)("option",{value:"SUUMO",children:"SUUMO"}),(0,s.jsx)("option",{value:"Yahoo!不動産",children:"Yahoo!不動産"}),(0,s.jsx)("option",{value:"REINS",children:"REINS"}),(0,s.jsx)("option",{value:"業者様からの紹介",children:"業者様からの紹介"}),(0,s.jsx)("option",{value:"その他",children:"その他"})]})]}),(0,s.jsxs)("div",{className:"form-group",style:{display:d?"block":"none"},children:[(0,s.jsxs)("label",{htmlFor:"agentName",children:["紹介いただいた業者様名 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"agentName",name:"agentName",placeholder:"ご紹介いただいた業者様の名前や媒体名をご入力ください",required:d})]}),(0,s.jsx)("h2",{children:"購入希望条件"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"propertySearch",children:["購入希望物件 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",id:"propertySearch",value:u,onChange:e=>x(e.target.value),placeholder:"物件番号または住所で検索（部分一致可）",className:"w-full border rounded p-2"}),(0,s.jsxs)("select",{id:"propertySelect",name:"propertyName",onChange:e=>{var r;return n(null!=(r=m.find(r=>r.no+" "+r.address===e.target.value))?r:null)},defaultValue:"",required:!0,className:"w-full border rounded mt-2 p-2",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- 物件を選択してください --"}),j.map((e,r)=>{let n="".concat(e.no," ").concat(e.address);return(0,s.jsxs)("option",{value:n,children:[e.no," ",e.address]},"property-".concat(r,"-").concat(e.no))})]})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"propertyType",children:"物件種別"}),(0,s.jsx)("input",{type:"text",id:"propertyType",name:"propertyType",className:"no-focus",value:null!=(e=null==r?void 0:r.type)?e:"",readOnly:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"propertyPrice",children:"販売価格 (万円)"}),(0,s.jsx)("input",{type:"text",id:"propertyPrice",name:"propertyPrice",className:"no-focus",value:(null==r?void 0:r.price)?t(r.price.toString()):"",readOnly:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"offerPrice",children:["買付金額 (万円) ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"offerPrice",name:"offerPrice",inputMode:"numeric",onChange:S,pattern:"^\\d+(?:,\\d{3})*$",placeholder:"万円単位で半角数字のみでご入力ください",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"deposit",children:["手付金 (万円) ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"deposit",name:"deposit",inputMode:"numeric",onChange:S,pattern:"^\\d+(?:,\\d{3})*$",placeholder:"万円単位で半角数字のみでご入力ください",required:!0}),(0,s.jsx)("div",{className:"note",children:"※購入金額の10%を目安にお願いいたします"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"loanContingency",children:["購入方法 ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsxs)("select",{id:"loanContingency",name:"loanContingency",onChange:e=>{let r=e.target.value;"融資利用(融資特約あり)"===r?p("※融資が承認されない場合は契約を白紙解除できます。"):"融資利用(融資特約なし)"===r||"現金購入"===r?p("※融資承認が得られなくても契約解除はできません。"):p("")},defaultValue:"",required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- 選択してください --"}),(0,s.jsx)("option",{value:"現金購入",children:"現金購入"}),(0,s.jsx)("option",{value:"融資利用(融資特約なし)",children:"融資利用(融資特約なし)"}),(0,s.jsx)("option",{value:"融資利用(融資特約あり)",children:"融資利用(融資特約あり)"})]}),(0,s.jsx)("div",{id:"loanNote",className:"note",style:{display:c?"block":"none"},children:c})]}),(0,s.jsx)("h2",{children:"購入の条件 (任意)"}),(0,s.jsxs)("div",{className:"note mb-4",children:[(0,s.jsx)("p",{children:"ご購入に際し、条件がある場合はご入力ください（最大5つまで）"}),(0,s.jsx)("p",{children:"※公簿売買・現況有姿・境界非明示でのお引き渡しは基本条件となります（一部物件を除く）"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"condition1",children:"条件1"}),(0,s.jsx)("input",{type:"text",id:"condition1",name:"condition1"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"condition2",children:"条件2"}),(0,s.jsx)("input",{type:"text",id:"condition2",name:"condition2"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"condition3",children:"条件3"}),(0,s.jsx)("input",{type:"text",id:"condition3",name:"condition3"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"condition4",children:"条件4"}),(0,s.jsx)("input",{type:"text",id:"condition4",name:"condition4"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"condition5",children:"条件5"}),(0,s.jsx)("input",{type:"text",id:"condition5",name:"condition5"})]}),(0,s.jsx)("button",{type:"submit",id:"submitBtn",children:"送信"})]}),(0,s.jsx)(a,{isOpen:g,onClose:()=>N(!1),onConfirm:F,formData:y})]})}},5245:(e,r,n)=>{Promise.resolve().then(n.bind(n,5077))},6519:(e,r,n)=>{"use strict";n.d(r,{p:()=>s});class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}async fetchProperties(){try{let e=this.API_URL+"/fetch",r=await fetch(e);return(await r.json()).properties.filter(e=>e.no&&""!==e.no.trim())}catch(e){return console.error("物件データの取得に失敗しました:",e),[]}}async fetchPropertiesNaiken(){try{let e=this.API_URL+"/fetch_naiken",r=await fetch(e);return(await r.json()).properties.filter(e=>e.no&&""!==e.no.trim())}catch(e){return console.error("物件データの取得に失敗しました:",e),[]}}async sendKaitsukeFormData(e){try{let r={lastName:e.lastName,firstName:e.firstName,companyName:e.companyName,email:e.email,phone:e.phone,address:e.address,media:e.media,agentName:e.agentName,offerPrice:e.offerPrice,deposit:e.deposit,loan:e.loan,conditions:e.conditions,propertyNo:e.property.no,propertyAddress:e.property.address,propertyType:e.property.type,propertyPrice:e.property.price},n=this.API_URL+"/send_kaitsuke",s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return await s.json()}catch(e){return console.error("フォームデータの送信に失敗しました:",e),{status:"error",message:"フォームデータの送信に失敗しました"}}}async sendNaikenFormData(e){try{let r={name:e.name,phone:e.phone,email:e.email,date1:e.date1,time1:e.time1,date2:e.date2,time2:e.time2,imgFile:e.imgFile,privacy:e.privacy,propertyNo:e.property.no,propertyAddress:e.property.address,propertyType:e.property.type,propertyPrice:e.property.price},n=this.API_URL+"/send_naiken",s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return await s.json()}catch(e){return console.error("フォームデータの送信に失敗しました:",e),{status:"error",message:"フォームデータの送信に失敗しました"}}}constructor(){this.API_URL="https://techpro-form-api-236032490225.asia-northeast1.run.app"}}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(5245)),_N_E=e.O()}]);